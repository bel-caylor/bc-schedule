/******/ (() => { // webpackBootstrap
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
/*!*********************!*\
  !*** ./js/index.js ***!
  \*********************/
jQuery(document).ready(function ($) {
  // Attach a click event to your trash icon (assuming it has a specific class or ID)
  $('.dashicons-trash').on('click', function () {
    const rowID = $(this).data('row-id');
    console.log(rowID);
    const table = $(this).data('table');
    console.log(table);

    // Make the AJAX request
    var baseUrl = window.location.origin;
    $.ajax({
      url: '/wp-json/bcs/v1/delete_row/' + rowID,
      type: 'DELETE',
      data: {
        nonce: $('#bcs_nonce').val(),
        table: table,
        row: rowID
      },
      success: function (response) {
        // Handle success (e.g., remove the row from the table)
        console.log(response);
        console.log('Role deleted successfully');
        $(`#row-${rowID}`).remove();
      },
      error: function (error) {
        // Handle error
        console.error('Error deleting role');
      }
    });
  });
});
() => {
  function alpineForm() {
    return {
      selectedGroup: '',
      selectedVolunteers: [],
      selectedTeamID: '',
      teamName: '',
      teamRoles: [],
      allRoles: [],
      allTeams: [],
      allVolunteers: [],
      uniqueGroups: [],
      forceRerender: false,
      init() {
        const allRoles = roles;
        const volunteers = volunteers;
        // console.log(volunteers);
        this.allRoles = allRoles;
        this.allVolunteers = volunteers;
        this.allTeams = teams;
        // Populate unique groups
        this.uniqueGroups = [...new Set(volunteers.map(item => item.group_name))];
      },
      displayTeamRoles() {
        const roles = this.allRoles.filter(item => item.group === this.selectedGroup);

        // console.log(roles);
        const teamRoles = [...new Set(roles.map(item => ({
          role: item.role,
          roleID: item.id
        })))];

        // Create data from table dropdowns
        const roleObjects = teamRoles.map(role => ({
          roleID: role.roleID,
          role: role.role,
          volunteers: this.findVolunteersForRole(role.role),
          selectedVolunteer: ''
        }));
        this.teamRoles = roleObjects;

        // Create selected volunteer data.
        const selectedVolunteers = Object.fromEntries(teamRoles.map(role => [role.roleID, {
          role: role.role,
          volunteerID: ''
        }]));
        this.selectedVolunteers = selectedVolunteers;
      },
      findVolunteersForRole(role) {
        return this.allVolunteers.filter(item => item.group_name === this.selectedGroup && item.role === role);
      },
      teamSelectName(teamID) {
        const team = this.allTeams.filter(item => item.id === teamID);
        return team[0].group_name + ' - ' + team[0].name;
      },
      displaySelectTeam() {
        const team = this.allTeams.filter(item => item.id === this.selectedTeamID);
        this.selectedGroup = team[0].group_name;
        this.displayTeamRoles();
        var teamVolunteers = team[0].volunteers;
        teamVolunteers = JSON.parse(teamVolunteers);

        //Loop through teamRoles and selectedVolunteer
        this.teamRoles.forEach(item => {
          // console.log(item.roleID);
          // Check if the role exists in the teamVolunteers object
          if (teamVolunteers.hasOwnProperty(item.roleID)) {
            const volunteerID = teamVolunteers[item.roleID].volunteerID;
            this.$set(item, 'selectedVolunteer', volunteerID);
            // item.selectedVolunteer = volunteerID;
          }
        });

        // Trigger re-render
        this.forceRerender = !this.forceRerender;
      },
      updateSelectedVolunteer(roleID, selectedVolunteer) {
        this.$set(this.selectedVolunteers[roleID], 'volunteerID', selectedVolunteer);
        // this.selectedVolunteers[roleID].volunteerID = selectedVolunteer;
      }
    };
  }
};
})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!******************************!*\
  !*** ./scss/stylesheet.scss ***!
  \******************************/
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUFJLENBQUNjLElBQUksQ0FBQyxJQUFJLENBQUN2QyxrQkFBa0IsQ0FBQ3FCLE1BQU0sQ0FBQyxFQUFFLGFBQWEsRUFBRUksaUJBQWlCLENBQUM7UUFDNUU7TUFDSjtJQUNKLENBQUM7RUFDTDtBQUNKLENBQUMsQzs7Ozs7Ozs7OztBQ3JIRCIsInNvdXJjZXMiOlsid2VicGFjazovL2JjLXNjaGVkdWxlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JjLXNjaGVkdWxlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYmMtc2NoZWR1bGUvLi9qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9iYy1zY2hlZHVsZS8uL3Njc3Mvc3R5bGVzaGVldC5zY3NzPzE4ZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xyXG4gICAgLy8gQXR0YWNoIGEgY2xpY2sgZXZlbnQgdG8geW91ciB0cmFzaCBpY29uIChhc3N1bWluZyBpdCBoYXMgYSBzcGVjaWZpYyBjbGFzcyBvciBJRClcclxuICAgICQoJy5kYXNoaWNvbnMtdHJhc2gnKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zdCByb3dJRCA9ICQodGhpcykuZGF0YSgncm93LWlkJyk7IFxyXG4gICAgICAgIGNvbnNvbGUubG9nKHJvd0lEKTtcclxuICAgICAgICBjb25zdCB0YWJsZSA9ICQodGhpcykuZGF0YSgndGFibGUnKTsgXHJcbiAgICAgICAgY29uc29sZS5sb2codGFibGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1ha2UgdGhlIEFKQVggcmVxdWVzdFxyXG4gICAgICAgIHZhciBiYXNlVXJsID0gd2luZG93LmxvY2F0aW9uLm9yaWdpbjtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6ICcvd3AtanNvbi9iY3MvdjEvZGVsZXRlX3Jvdy8nICsgcm93SUQsXHJcbiAgICAgICAgICAgIHR5cGU6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBub25jZTogJCgnI2Jjc19ub25jZScpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgdGFibGU6IHRhYmxlLFxyXG4gICAgICAgICAgICAgICAgcm93OiByb3dJRFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHN1Y2Nlc3MgKGUuZy4sIHJlbW92ZSB0aGUgcm93IGZyb20gdGhlIHRhYmxlKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JvbGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgICAgICQoYCNyb3ctJHtyb3dJRH1gKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZXJyb3JcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIHJvbGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG4oKCkgPT4ge1xyXG5cclxuICAgIGZ1bmN0aW9uIGFscGluZUZvcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2VsZWN0ZWRHcm91cDogJycsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVm9sdW50ZWVyczogW10sXHJcbiAgICAgICAgICAgIHNlbGVjdGVkVGVhbUlEOiAnJyxcclxuICAgICAgICAgICAgdGVhbU5hbWU6ICcnLFxyXG4gICAgICAgICAgICB0ZWFtUm9sZXM6IFtdLFxyXG4gICAgICAgICAgICBhbGxSb2xlczogW10sXHJcbiAgICAgICAgICAgIGFsbFRlYW1zOiBbXSxcclxuICAgICAgICAgICAgYWxsVm9sdW50ZWVyczogW10sXHJcbiAgICAgICAgICAgIHVuaXF1ZUdyb3VwczogW10sXHJcbiAgICAgICAgICAgIGZvcmNlUmVyZW5kZXI6IGZhbHNlLFxyXG4gICAgXHJcbiAgICAgICAgICAgIGluaXQoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhbGxSb2xlcyA9IHJvbGVzO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgdm9sdW50ZWVycyA9IHZvbHVudGVlcnM7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh2b2x1bnRlZXJzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsUm9sZXMgPSBhbGxSb2xlcztcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsVm9sdW50ZWVycyA9IHZvbHVudGVlcnM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbFRlYW1zID0gdGVhbXM7XHJcbiAgICAgICAgICAgICAgICAvLyBQb3B1bGF0ZSB1bmlxdWUgZ3JvdXBzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVuaXF1ZUdyb3VwcyA9IFsuLi5uZXcgU2V0KHZvbHVudGVlcnMubWFwKGl0ZW0gPT4gaXRlbS5ncm91cF9uYW1lKSldO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgXHJcbiAgICAgICAgICAgIGRpc3BsYXlUZWFtUm9sZXMoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByb2xlcyA9IHRoaXMuYWxsUm9sZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5ncm91cCA9PT0gdGhpcy5zZWxlY3RlZEdyb3VwKTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocm9sZXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVhbVJvbGVzID0gWy4uLm5ldyBTZXQocm9sZXMubWFwKGl0ZW0gPT4gKHtyb2xlOiBpdGVtLnJvbGUsIHJvbGVJRDogaXRlbS5pZH0pKSldO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgZGF0YSBmcm9tIHRhYmxlIGRyb3Bkb3duc1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sZU9iamVjdHMgPSB0ZWFtUm9sZXMubWFwKHJvbGUgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlSUQ6IHJvbGUucm9sZUlELFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6IHJvbGUucm9sZSxcclxuICAgICAgICAgICAgICAgICAgICB2b2x1bnRlZXJzOiB0aGlzLmZpbmRWb2x1bnRlZXJzRm9yUm9sZShyb2xlLnJvbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVm9sdW50ZWVyOiAnJyxcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVhbVJvbGVzID0gcm9sZU9iamVjdHM7XHJcbiAgICBcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBzZWxlY3RlZCB2b2x1bnRlZXIgZGF0YS5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkVm9sdW50ZWVycyA9IE9iamVjdC5mcm9tRW50cmllcyhcclxuICAgICAgICAgICAgICAgICAgICB0ZWFtUm9sZXMubWFwKHJvbGUgPT4gKFtyb2xlLnJvbGVJRCwgeyByb2xlOiByb2xlLnJvbGUsIHZvbHVudGVlcklEOiAnJyB9XSkpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFZvbHVudGVlcnMgPSBzZWxlY3RlZFZvbHVudGVlcnM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZmluZFZvbHVudGVlcnNGb3JSb2xlKHJvbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFsbFZvbHVudGVlcnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5ncm91cF9uYW1lID09PSB0aGlzLnNlbGVjdGVkR3JvdXAgJiYgaXRlbS5yb2xlID09PSByb2xlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICB0ZWFtU2VsZWN0TmFtZSh0ZWFtSUQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlYW0gPSB0aGlzLmFsbFRlYW1zLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgPT09IHRlYW1JRCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVhbVswXS5ncm91cF9uYW1lICsgJyAtICcgKyB0ZWFtWzBdLm5hbWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICBcclxuICAgICAgICAgICAgZGlzcGxheVNlbGVjdFRlYW0oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZWFtID0gdGhpcy5hbGxUZWFtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmlkID09PSB0aGlzLnNlbGVjdGVkVGVhbUlEKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRHcm91cCA9IHRlYW1bMF0uZ3JvdXBfbmFtZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheVRlYW1Sb2xlcygpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgdGVhbVZvbHVudGVlcnMgPSB0ZWFtWzBdLnZvbHVudGVlcnM7XHJcbiAgICAgICAgICAgICAgICB0ZWFtVm9sdW50ZWVycyA9IEpTT04ucGFyc2UodGVhbVZvbHVudGVlcnMpO1xyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvL0xvb3AgdGhyb3VnaCB0ZWFtUm9sZXMgYW5kIHNlbGVjdGVkVm9sdW50ZWVyXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlYW1Sb2xlcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGl0ZW0ucm9sZUlEKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcm9sZSBleGlzdHMgaW4gdGhlIHRlYW1Wb2x1bnRlZXJzIG9iamVjdFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZWFtVm9sdW50ZWVycy5oYXNPd25Qcm9wZXJ0eShpdGVtLnJvbGVJRCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9sdW50ZWVySUQgPSB0ZWFtVm9sdW50ZWVyc1tpdGVtLnJvbGVJRF0udm9sdW50ZWVySUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHNldChpdGVtLCAnc2VsZWN0ZWRWb2x1bnRlZXInLCB2b2x1bnRlZXJJRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0ZW0uc2VsZWN0ZWRWb2x1bnRlZXIgPSB2b2x1bnRlZXJJRDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHJlLXJlbmRlclxyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JjZVJlcmVuZGVyID0gIXRoaXMuZm9yY2VSZXJlbmRlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgIFxyXG4gICAgICAgICAgICB1cGRhdGVTZWxlY3RlZFZvbHVudGVlcihyb2xlSUQsIHNlbGVjdGVkVm9sdW50ZWVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy5zZWxlY3RlZFZvbHVudGVlcnNbcm9sZUlEXSwgJ3ZvbHVudGVlcklEJywgc2VsZWN0ZWRWb2x1bnRlZXIpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZFZvbHVudGVlcnNbcm9sZUlEXS52b2x1bnRlZXJJRCA9IHNlbGVjdGVkVm9sdW50ZWVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufSkiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiXSwibmFtZXMiOlsialF1ZXJ5IiwiZG9jdW1lbnQiLCJyZWFkeSIsIiQiLCJvbiIsInJvd0lEIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJ0YWJsZSIsImJhc2VVcmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsImFqYXgiLCJ1cmwiLCJ0eXBlIiwibm9uY2UiLCJ2YWwiLCJyb3ciLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJyZW1vdmUiLCJlcnJvciIsImFscGluZUZvcm0iLCJzZWxlY3RlZEdyb3VwIiwic2VsZWN0ZWRWb2x1bnRlZXJzIiwic2VsZWN0ZWRUZWFtSUQiLCJ0ZWFtTmFtZSIsInRlYW1Sb2xlcyIsImFsbFJvbGVzIiwiYWxsVGVhbXMiLCJhbGxWb2x1bnRlZXJzIiwidW5pcXVlR3JvdXBzIiwiZm9yY2VSZXJlbmRlciIsImluaXQiLCJyb2xlcyIsInZvbHVudGVlcnMiLCJ0ZWFtcyIsIlNldCIsIm1hcCIsIml0ZW0iLCJncm91cF9uYW1lIiwiZGlzcGxheVRlYW1Sb2xlcyIsImZpbHRlciIsImdyb3VwIiwicm9sZSIsInJvbGVJRCIsImlkIiwicm9sZU9iamVjdHMiLCJmaW5kVm9sdW50ZWVyc0ZvclJvbGUiLCJzZWxlY3RlZFZvbHVudGVlciIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwidm9sdW50ZWVySUQiLCJ0ZWFtU2VsZWN0TmFtZSIsInRlYW1JRCIsInRlYW0iLCJuYW1lIiwiZGlzcGxheVNlbGVjdFRlYW0iLCJ0ZWFtVm9sdW50ZWVycyIsIkpTT04iLCJwYXJzZSIsImZvckVhY2giLCJoYXNPd25Qcm9wZXJ0eSIsIiRzZXQiLCJ1cGRhdGVTZWxlY3RlZFZvbHVudGVlciJdLCJzb3VyY2VSb290IjoiIn0=